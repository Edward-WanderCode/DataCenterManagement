<UserControl
    x:Class="DataCenterManagement.Views.LichTrucView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DataCenterManagement.Converters"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:DataCenterManagement.ViewModels"
    Width="775"
    mc:Ignorable="d">

    <!--  Nếu bạn đã tạo DateTimeConverter như mình gợi ý trước đó  -->
    <UserControl.Resources>
        <local:DateOnlyToDateTimeConverter x:Key="DateOnlyToDateTimeConverter" />
    </UserControl.Resources>

    <UserControl.DataContext>
        <vm:LichTrucViewModel />
    </UserControl.DataContext>

    <StackPanel Margin="16">
        <!--  Header controls: dùng DockPanel + Margin để tạo khoảng cách, không dùng Spacing  -->
        <DockPanel HorizontalAlignment="Center" LastChildFill="False">
            <Button
                Margin="0,0,8,0"
                Command="{Binding PrevWeekCommand}"
                Content="⟵ Tuần trước" />
            <Button
                Margin="0,0,8,0"
                Command="{Binding NextWeekCommand}"
                Content="Tuần sau ⟶" />
            <TextBlock
                Margin="8,0,4,8"
                VerticalAlignment="Center"
                Text="Bắt đầu từ (thứ 2):" />
            <DatePicker
                Width="160"
                Margin="0,0,8,8"
                SelectedDate="{Binding StartMonday, Mode=TwoWay, Converter={StaticResource DateOnlyToDateTimeConverter}}" />
            <Button
                Margin="8,0,0,0"
                Command="{Binding GenerateWeekCommand}"
                Content="Sinh lịch tuần" />
        </DockPanel>

        <!--  Khung giờ tham khảo  -->
        <Border
            Grid.Row="1"
            Width="675"
            Margin="10,10,0,10"
            Padding="10"
            HorizontalAlignment="Center"
            BorderBrush="Beige"
            BorderThickness="1"
            CornerRadius="6" />

        <!--  DataGrid lịch 7 ngày  -->
        <DataGrid
            Grid.Row="2"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            HeadersVisibility="Column"
            IsReadOnly="True"
            ItemsSource="{Binding WeekRows}">
            <DataGrid.Columns>
                <DataGridTextColumn
                    Width="1*"
                    Binding="{Binding Ngay, StringFormat=\{0:dd/MM/yyyy\}}"
                    Header="Ngày" />
                <DataGridTextColumn
                    Width="2*"
                    Binding="{Binding TenCa13}"
                    Header="Cán bộ trực Ca 1 - 3" />
                <DataGridTextColumn
                    Width="2*"
                    Binding="{Binding TenCa24}"
                    Header="Cán bộ trực Ca 2 - 4" />
            </DataGrid.Columns>
        </DataGrid>
        <Button
            Width="215"
            Margin="10,10,0,10"
            HorizontalAlignment="Right"
            Command="{Binding ExportWordCommand}">
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon
                    Width="20"
                    Height="20"
                    Margin="0,0,10,0"
                    Kind="FileExport" />
                <TextBlock Text="Xuất file work lịch trực" />
            </StackPanel>
        </Button>

    </StackPanel>
</UserControl>
